import{j as u,e as J,a5 as w,A as E,S as y}from"./8OYwj-MG.js";const A=u(!1),D=u({necessary:!0,analytics:!0,affiliate:!0}),W=u(!1),l=u(!1);function N(){const s=A,p=W,h=u(null),T=u(""),v=u(""),S=u(""),n=D,C=[{id:"necessary",label:"Necessary Cookies",description:"Essential for website functionality. These cookies are required and cannot be disabled.",required:!0},{id:"analytics",label:"Analytics Cookies",description:"Help us understand how visitors interact with our website. These cookies collect anonymous information.",required:!1},{id:"affiliate",label:"Affiliate Tracking",description:"Essential for our business operations. We use a unique identifier stored for 30 days to credit our partners when you visit gaming sites. No personal data is collected.",required:!0}],k=()=>typeof window>"u"?null:new URLSearchParams(window.location.search).get("tracker"),c=t=>{const o=new URLSearchParams(window.location.search),i=o.get("btag"),e=o.get("affid");let a=o.get("tracker");a||(a=t||w("affiliateTracker"));let r=[];a&&r.push(`tracker=${a}`),i&&r.push(`btag=${i}`),e&&r.push(`affid=${e}`);const _=r.join("&"),m=_?`?${_}`:"";T.value=`${y}${m}#registration`,v.value=`${y}${m}#login`,S.value=`${y}${m}#play/`},d=t=>{if(!t){c(null);return}const o=new Date;o.setDate(o.getDate()+30),document.cookie=`affiliateTracker=${t}; max-age=${30*24*60*60}; path=/; SameSite=Strict; Secure`;try{localStorage.setItem("affiliateTracker",t)}catch(i){console.warn("Failed to store affiliate tracker in localStorage:",i)}c(t)},f=t=>{if(typeof window>"u")return;const o=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack;if((o==="1"||o==="yes")&&(t=!1),t){if(window.dataLayer){window.dataLayer.push({event:"consent_update",analytics_storage:"granted",ad_storage:"granted",functionality_storage:"granted",personalization_storage:"granted",security_storage:"granted"});const i=document.querySelector('script[src*="googletagmanager.com/gtm.js"]');l.value&&window.initializeGTM&&!i&&window.initializeGTM(),window.dataLayer.push({event:"pageview",page_path:window.location.pathname,page_title:document.title})}}else if(document.cookie.split(";").map(e=>e.split("=")[0].trim()).filter(e=>e.startsWith("_ga")||e.startsWith("_gid")||e.startsWith("_gat")||e.startsWith("_dc_gtm")).forEach(e=>{document.cookie=`${e}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/`,document.cookie=`${e}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=${window.location.hostname}`,document.cookie=`${e}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=.${window.location.hostname}`}),Object.keys(localStorage).forEach(e=>{(e.startsWith("_ga")||e.startsWith("ga:"))&&localStorage.removeItem(e)}),delete window.ga,delete window.google_tag_manager,delete window.google_tag_data,delete window._gaq,delete window.gaData,delete window.gaGlobal,window.dataLayer){const e=window.dataLayer[0];window.dataLayer=[e]}},L=()=>{if(typeof document>"u")return;const t=["PHPSESSID","affiliateTracker"];document.cookie.split(";").forEach(e=>{const a=e.split("=")[0].trim();t.includes(a)||(document.cookie=`${a}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/`,document.cookie=`${a}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=${window.location.hostname}`,document.cookie=`${a}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=.${window.location.hostname}`)}),document.cookie.split(";").map(e=>e.split("=")[0].trim()).filter(e=>e.startsWith("_ga")||e.startsWith("_gid")||e.startsWith("_gat")||e.startsWith("_dc_gtm")).forEach(e=>{document.cookie=`${e}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/`,document.cookie=`${e}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=${window.location.hostname}`,document.cookie=`${e}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=.${window.location.hostname}`})},g=t=>{if(!l.value)return;t.analytics||L(),localStorage.setItem("cookieConsent",JSON.stringify({preferences:t,timestamp:new Date().toISOString(),version:"1.0"}));const o=k();if(o)d(o);else if(h.value)d(h.value);else{const i=w("affiliateTracker")||localStorage.getItem("affiliateTracker");c(i)}f(t.analytics)},b=()=>{l.value=!0;const t={necessary:!0,analytics:!0,affiliate:!0};n.value=t,g(t),f(!0),s.value=!1},$=()=>{if(typeof window>"u")return;const t=["PHPSESSID","affiliateTracker"];document.cookie.split(";").forEach(e=>{const a=e.split("=")[0].trim();t.includes(a)||(document.cookie=`${a}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/`,document.cookie=`${a}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=${window.location.hostname}`,document.cookie=`${a}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=.${window.location.hostname}`)});const i=["cookieConsent"];if(Object.keys(localStorage).forEach(e=>{i.includes(e)||localStorage.removeItem(e)}),sessionStorage.clear(),window.dataLayer){const e=window.dataLayer[0];window.dataLayer=[e]}delete window.ga,delete window.google_tag_manager,delete window.google_tag_data,delete window._gaq,delete window.gaData,delete window.gaGlobal},P=()=>{l.value=!0;const t={necessary:!0,analytics:!1,affiliate:!0};n.value=t,$(),g(t),s.value=!1},G=()=>{l.value=!0;const t={...n.value,necessary:!0,affiliate:!0};n.value=t,g(t),s.value=!1,p.value=!1},x=()=>{if(p.value=!0,!localStorage.getItem("cookieConsent"))n.value={necessary:!0,analytics:!0,affiliate:!0};else try{const{preferences:t}=JSON.parse(localStorage.getItem("cookieConsent"));n.value={...t,necessary:!0,affiliate:!0}}catch{n.value={necessary:!0,analytics:!0,affiliate:!0}}},I=()=>{const t=localStorage.getItem("cookieConsent");if(!t)return null;try{return JSON.parse(t)}catch{return null}},M=()=>{$(),localStorage.removeItem("cookieConsent"),n.value={necessary:!0,analytics:!1,affiliate:!0},c(null),s.value=!0};return J(()=>{const t=localStorage.getItem("cookieConsent"),o=k(),i=w("affiliateTracker"),e=localStorage.getItem("affiliateTracker"),a=o||i||e;if(t)try{const{preferences:r}=JSON.parse(t);l.value=!0,n.value={...r,necessary:!0,affiliate:!0},a?d(a):c(null),f(r.analytics),s.value=!1}catch(r){console.error("Error parsing saved consent:",r),l.value=!1,n.value={necessary:!0,analytics:!0,affiliate:!0},s.value=!0,a?d(a):c(null)}else l.value=!1,n.value={necessary:!0,analytics:!0,affiliate:!0},a?d(a):c(null),s.value=!0}),E(n,t=>{if(typeof window>"u")return;g(t),f(t.analytics);const o=k(),i=w("affiliateTracker"),e=localStorage.getItem("affiliateTracker"),a=o||h.value||i||e;a?d(a):c(null)},{deep:!0}),{showBanner:s,isPreferencesOpen:p,preferences:n,cookieCategories:C,handleAcceptAll:b,handleDeclineAll:P,savePreferences:G,handleOpenPreferences:x,withdrawConsent:M,getConsentStatus:I,regLink:T,loginLink:v,playLink:S}}export{N as u};
